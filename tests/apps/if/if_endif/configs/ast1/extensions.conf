[default]
exten => s,1,Answer()
    same => n,If(1)
        same => n,NoOp(inside main if)
        same => n,If(0)
            same => n,NoOp()
        same => n,EndIf()
        same => n,NoOp(after nested false if)
        same => n,If(1)
            same => n,NoOp(inside true nested if)
        same => n,EndIf()
        same => n,NoOp(after nested true if)
		; Test success: we exited only the inside If, not the outside If
		same => n,UserEvent(IfSuccess,Result: Pass)
		same => n,If(1)
            same => n,NoOp(inside true nested if)
			same => n,ExitIf()
        same => n,EndIf()
		; Test success: we exited only the inside If, not the outside If
		same => n,UserEvent(IfSuccess,Result: Pass)
		same => n,Hangup()
    same => n,EndIf()
	; Test failed: we shouldn't reach the exterior EndIf
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,Assert(0)
    same => n,NoOp(after main if)
    same => n,Hangup()
