
[default]
exten => s,1,Answer()
	; test If true
	same => n,If(1)
	same => n,UserEvent(IfSuccess,Result: Pass)
	same => n,EndIf()
	; test If false
	same => n,If(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test If false
	same => n,If(1)
	same => n,NoOp()
	same => n,Else() ; shouldn't execute this
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test ExitIf
	same => n,If(1)
	same => n,ExitIf()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test Else
	same => n,If(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,Else()
	same => n,Goto(after)
	same => n,EndIf()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n(after),NoOp()
	; test ElseIf
	same => n,If(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,ElseIf(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,ElseIf(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,Goto(after)
	same => n,ElseIf(1)
	same => n,UserEvent(IfSuccess,Result: Pass)
	same => n,Else()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	same => n(after),NoOp()
	; test ElseIf #2
	same => n,If(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,ElseIf(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,ElseIf(0)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,ElseIf(1)
	same => n,Goto(after2)
	same => n,Else()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n(after2),NoOp()
	; test nested If
	same => n,If(1)
		same => n,If(1)
		same => n,UserEvent(IfSuccess,Result: Pass)
		same => n,ExitIf()
		same => n,UserEvent(IfSuccess,Result: Fail)
		same => n,EndIf()
		same => n,UserEvent(IfSuccess,Result: Pass)
	same => n,ExitIf()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	same => n,UserEvent(IfSuccess,Result: Pass)
	; test really nested
	same => n,If(1)
		same => n,If(1)
			same => n,If(0)
			same => n,Else()
			same => n,UserEvent(IfSuccess,Result: Pass)
			same => n,ExitIf()
			same => n,EndIf()
		same => n,UserEvent(IfSuccess,Result: Pass)
		same => n,ExitIf()
		same => n,UserEvent(IfSuccess,Result: Fail)
		same => n,EndIf()
		same => n,UserEvent(IfSuccess,Result: Pass)
	same => n,ExitIf()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test that Else doesn't execute after true If
	same => n,If(1)
	same => n,NoOp()
	same => n,Else()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test that ElseIf doesn't execute after true If
	same => n,If(1)
	same => n,NoOp()
	same => n,ExitIf()
	same => n,ElseIf(1) ; needed to exit If before ElseIf (but not before Else)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test that Else/ElseIf doesn't execute after true If
	same => n,If(1)
	same => n,NoOp()
	same => n,ExitIf()
	same => n,ElseIf(1)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,Else()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test that If matches Else only if it's before its EndIf
	same => n,If(0)
	same => n,NoOp()
	same => n,EndIf()
	same => n,If(1)
	same => n,NoOp()
	same => n,Else()
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; test that If matches ElseIf only if it's before its EndIf
	same => n,If(0)
	same => n,NoOp()
	same => n,EndIf()
	same => n,If(1)
	same => n,NoOp()
	same => n,ExitIf() ; needed to exit If before ElseIf (but not before Else)
	same => n,ElseIf(1)
	same => n,UserEvent(IfSuccess,Result: Fail)
	same => n,EndIf()
	; all tests succeeded
	same => n,UserEvent(IfSuccess,Result: Pass)
	same => n,Hangup()

[nothing]
exten => 0,1,Answer()
	same => n,Wait(10)
	same => n,Hangup()
